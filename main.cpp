// JsonParser.cpp : 此文件包含 "main" 函数。程序执行将在此处开始并结束。
//

#include <iostream>
#include <fstream>
#include "JsonParser.h"

const char* TestJson1 = R"(
{"id":26096,"subLemmaId":7373792,"newLemmaId":27263,"key":"\u94f6\u9b42","desc":"\u7a7a\u77e5\u82f1\u79cb\u521b\u4f5c\u7684\u6f2b\u753b","title":"\u94f6\u9b42","card":[{"key":"m21_bookname","name":"\u4e2d\u6587\u540d","value":["\u94f6\u9b42"],"format":["\u94f6\u9b42"]},{"key":"m21_originalname","name":"\u539f\u7248\u540d\u79f0","value":["\u9280\u9b42"],"format":["\u9280\u9b42"]},{"key":"m21_alternateName","name":"\u522b\u540d","value":["GINTAMA\u3001\u304e\u3093\u305f\u307e"],"format":["GINTAMA\u3001\u304e\u3093\u305f\u307e"]},{"key":"m21_author","name":"\u4f5c\u8005","value":["\u7a7a\u77e5\u82f1\u79cb"],"format":["\u7a7a\u77e5\u82f1\u79cb"]},{"key":"m21_booktype","name":"\u7c7b\u578b","value":["\u5e55\u672b\u3001\u641e\u7b11\u3001\u79d1\u5e7b\u3001\u52a8\u4f5c"],"format":["\u5e55\u672b\u3001\u641e\u7b11\u3001\u79d1\u5e7b\u3001\u52a8\u4f5c"]},{"key":"m21_bookregion","name":"\u5730\u533a","value":["\u65e5\u672c"],"format":["\u65e5\u672c"]},{"key":"m21_seriesmagazine","name":"\u8fde\u8f7d\u6742\u5fd7","value":["\u300a\u5468\u520a\u5c11\u5e74JUMP\u300b\u3001\u300aJUMP GIGA\u300b"],"format":["\u300a\u5468\u520a\u5c11\u5e74JUMP\u300b\u3001\u300aJUMP GIGA\u300b"]},{"key":"m21_seriesnum","name":"\u63ed\u8f7d\u53f7","value":["2004\u5e742\u53f7"],"format":["2004\u5e742\u53f7"]},{"key":"m21_publishperiod","name":"\u51fa\u7248\u671f\u95f4","value":["2004\u5e744\u6708\uff0d2019\u5e741\u67084\u65e5"],"format":["2004\u5e744\u6708\uff0d2019\u5e741\u67084\u65e5"]},{"key":"m21_volumes","name":"\u5355\u884c\u672c\u518c\u6570","value":["77 \u5377<sup>26<\/sup><a name=\"ref_26\"><\/a>"],"format":["77 \u5377<sup>26<\/sup><a name=\"ref_26\"><\/a>"]},{"key":"m21_press","name":"\u51fa\u7248\u793e","value":["\u96c6\u82f1\u793e"],"format":["\u96c6\u82f1\u793e"]},{"key":"m21_otherpress","name":"\u5176\u4ed6\u51fa\u7248\u793e","value":["\u4e2d\u56fd\u53f0\u6e7e\uff1a<a target=_blank href=\"\/item\/%E4%B8%9C%E7%AB%8B%E5%87%BA%E7%89%88%E7%A4%BE\">\u4e1c\u7acb\u51fa\u7248\u793e<\/a>","\u4e2d\u56fd\u9999\u6e2f\uff1a<a target=_blank href=\"\/item\/%E6%AD%A3%E6%96%87%E7%A4%BE\">\u6b63\u6587\u793e<\/a>","\u4e2d\u56fd\u5927\u9646\uff1a<a target=_blank href=\"\/item\/%E8%BF%9E%E7%8E%AF%E7%94%BB%E5%87%BA%E7%89%88%E7%A4%BE\">\u8fde\u73af\u753b\u51fa\u7248\u793e<\/a>\uff08\u51fa\u7248\uff09\u3001\u5317\u4eac\u4e2d\u5c11\u52a8\u6f2b\uff08\u53d1\u884c\uff09","\u65b0\u52a0\u5761\uff1a\u521b\u827a\u51fa\u7248\u793e"],"format":["\u4e2d\u56fd\u53f0\u6e7e\uff1a<a target=_blank href=\"\/item\/%E4%B8%9C%E7%AB%8B%E5%87%BA%E7%89%88%E7%A4%BE\">\u4e1c\u7acb\u51fa\u7248\u793e<\/a>","\u4e2d\u56fd\u9999\u6e2f\uff1a<a target=_blank href=\"\/item\/%E6%AD%A3%E6%96%87%E7%A4%BE\">\u6b63\u6587\u793e<\/a>","\u4e2d\u56fd\u5927\u9646\uff1a<a target=_blank href=\"\/item\/%E8%BF%9E%E7%8E%AF%E7%94%BB%E5%87%BA%E7%89%88%E7%A4%BE\">\u8fde\u73af\u753b\u51fa\u7248\u793e<\/a>\uff08\u51fa\u7248\uff09\u3001\u5317\u4eac\u4e2d\u5c11\u52a8\u6f2b\uff08\u53d1\u884c\uff09","\u65b0\u52a0\u5761\uff1a\u521b\u827a\u51fa\u7248\u793e"]},{"key":"m21_customDefault","name":"\u7f51\u7edc\u8fde\u8f7d","value":["<a target=_blank href=\"\/item\/%E8%85%BE%E8%AE%AF%E5%8A%A8%E6%BC%AB\">\u817e\u8baf\u52a8\u6f2b<\/a>\uff08\u4e2d\u56fd\u5927\u9646\uff09\u3001<a target=_blank href=\"\/item\/%E6%BC%AB%E7%95%AA%E6%BC%AB%E7%94%BB\/23502599\" data-lemmaid=\"23502599\">\u6f2b\u756a\u6f2b\u753b<\/a>\uff08\u4e2d\u56fd\u5927\u9646\uff09\u3001<a target=_blank href=\"\/item\/%E5%93%94%E5%93%A9%E5%93%94%E5%93%A9%E6%BC%AB%E7%94%BB\/23525597\" data-lemmaid=\"23525597\">\u54d4\u54e9\u54d4\u54e9\u6f2b\u753b<\/a><sup>2<\/sup><a name=\"ref_2\"><\/a>"],"format":["<a target=_blank href=\"\/item\/%E8%85%BE%E8%AE%AF%E5%8A%A8%E6%BC%AB\">\u817e\u8baf\u52a8\u6f2b<\/a>\uff08\u4e2d\u56fd\u5927\u9646\uff09\u3001<a target=_blank href=\"\/item\/%E6%BC%AB%E7%95%AA%E6%BC%AB%E7%94%BB\/23502599\" data-lemmaid=\"23502599\">\u6f2b\u756a\u6f2b\u753b<\/a>\uff08\u4e2d\u56fd\u5927\u9646\uff09\u3001<a target=_blank href=\"\/item\/%E5%93%94%E5%93%A9%E5%93%94%E5%93%A9%E6%BC%AB%E7%94%BB\/23525597\" data-lemmaid=\"23525597\">\u54d4\u54e9\u54d4\u54e9\u6f2b\u753b<\/a><sup>2<\/sup><a name=\"ref_2\"><\/a>"]},{"key":"m21_customDefault","name":"JUMP\u8fde\u8f7d","value":["2003\u5e7412\u67088\u65e5-2018\u5e749\u670815\u65e5"],"format":["2003\u5e7412\u67088\u65e5-2018\u5e749\u670815\u65e5"]},{"key":"m21_customDefault","name":"GIGA\u8fde\u8f7d","value":["2018\u5e7412\u670828\u65e5-2019\u5e742\u670822\u65e5"],"format":["2018\u5e7412\u670828\u65e5-2019\u5e742\u670822\u65e5"]},{"key":"m21_customDefault","name":"APP\u8fde\u8f7d","value":["2019\u5e745\u670813\u65e5-6\u670820\u65e5"],"format":["2019\u5e745\u670813\u65e5-6\u670820\u65e5"]}],"image":"https:\/\/bkimg.cdn.bcebos.com\/pic\/10dfa9ec8a13632745a402369e8fa0ec08fac76e","src":"10dfa9ec8a13632745a402369e8fa0ec08fac76e","imageHeight":1859,"imageWidth":1200,"isSummaryPic":"y","abstract":"\u300a\u94f6\u9b42\u300b\u662f\u7531\u65e5\u672c\u6f2b\u753b\u5bb6\u7a7a\u77e5\u82f1\u79cb\u521b\u4f5c\u7684\u5c11\u5e74\u6f2b\u753b\u4f5c\u54c1\uff0c\u4e8e2004\u5e742\u53f7\u7684\u300a\u5468\u520a\u5c11\u5e74Jump\u300b\u5f00\u59cb\u8fde\u8f7d\uff0c\u5e76\u4e8e2018\u5e7442\u53f7\u7ed3\u675f\u8fde\u8f7d\u3002\u540e\u8f6c\u79fb\u81f3\u300aJUMP GIGA\u300b2019 WINTER vol.1~vol.3\u7ee7\u7eed\u8fde\u8f7d\uff0c\u800c\u540e\u8f6c\u79fb\u5230\u94f6\u9b42App\u8fde\u8f7d\uff0c\u5e76\u4e8e2019\u5e746\u670820\u65e5\u63a8\u9001\u6700\u7ec8\u56de\u30022006\u5e744\u67084\u65e5\u8d77\uff0c\u7531\u65e5\u5347\u52a8\u753b\u6539\u7f16\u7684\u540c\u540d\u7535\u89c6\u52a8\u753b\u5f00\u59cb\u5728\u4e1c\u4eac\u7535\u89c6\u53f0\u653e\u9001\u3002\u622a\u81f32018\u5e748\u6708\uff0c\u300a\u94f6\u9b42\u300b\u65e5\u672c\u56fd\u5185\u5355\u884c\u672c\u7d2f\u8ba1\u53d1\u884c\u91cf\u7a81\u78345500\u4e07\u518c\u3002","moduleIds":[3000606332,3000606333,3000606334,3000606335,3000606336,3000606337,3000606338,3000606339,3000606340,3000606341,3000606342,3000606343,3000606344,3000606345,3000606346,3000606347,3000606348,3000606349,3000606350,3000606351,3000606386],"url":"http:\/\/baike.baidu.com\/subview\/26096\/7373792.htm","wapUrl":"http:\/\/wapbaike.baidu.com\/item\/%E9%93%B6%E9%AD%82\/27263","hasOther":1,"totalUrl":"http:\/\/baike.baidu.com\/view\/26096.htm","catalog":["<a href='http:\/\/baike.baidu.com\/subview\/26096\/7373792.htm#1'>\u521b\u4f5c\u80cc\u666f<\/a>","<a href='http:\/\/baike.baidu.com\/subview\/26096\/7373792.htm#2'>\u5267\u60c5\u7b80\u4ecb<\/a>","<a href='http:\/\/baike.baidu.com\/subview\/26096\/7373792.htm#3'>\u767b\u573a\u89d2\u8272<\/a>","<a href='http:\/\/baike.baidu.com\/subview\/26096\/7373792.htm#4'>\u7528\u8bed\u89e3\u8bf4<\/a>"],"wapCatalog":["<a href='http:\/\/wapbaike.baidu.com\/item\/%E9%93%B6%E9%AD%82\/27263#1'>\u521b\u4f5c\u80cc\u666f<\/a>","<a href='http:\/\/wapbaike.baidu.com\/item\/%E9%93%B6%E9%AD%82\/27263#2'>\u5267\u60c5\u7b80\u4ecb<\/a>","<a href='http:\/\/wapbaike.baidu.com\/item\/%E9%93%B6%E9%AD%82\/27263#3'>\u767b\u573a\u89d2\u8272<\/a>","<a href='http:\/\/wapbaike.baidu.com\/item\/%E9%93%B6%E9%AD%82\/27263#4'>\u7528\u8bed\u89e3\u8bf4<\/a>"],"logo":"https:\/\/img.baidu.com\/img\/baike\/logo-baike.gif","copyrights":"\u4ee5\u4e0a\u5185\u5bb9\u6765\u81ea\u767e\u5ea6\u767e\u79d1\u5e73\u53f0\uff0c\u7531\u767e\u5ea6\u767e\u79d1\u7f51\u53cb\u521b\u4f5c\u3002","customImg":"","redirect":[]}
)";

const char* TestJson2 = R"(
[{},{"test1":[]},{"test2":3.1e+10},{"_id":"643f482fd216a9aa747db100","index":0,"guid":"5ee7bd22-470d-44e2-9a3d-af98ee91c44e","isActive":false,"balance":"$1,053.18","picture":"http://placehold.it/32x32","age":36,"eyeColor":"brown","name":"Wells Burris","gender":"male","company":"NAMEGEN","email":"wellsburris@namegen.com","phone":"+1 (831) 463-2678","address":"516 Bryant Street, Ola, Guam, 368","about":"Deserunt do qui duis irure fugiat do mollit sit eiusmod aute laborum dolore nulla. Incididunt occaecat dolor est aliqua occaecat proident minim dolore occaecat labore elit pariatur duis. Magna do amet veniam consectetur nulla ex aute nulla qui duis laborum. Ullamco ad laborum aliqua anim officia.\r\n","registered":"2019-12-28T09:59:22 -08:00","latitude":-86.146948,"longitude":-8.65925,"tags":["cillum","id","exercitation","officia","occaecat","quis","nostrud"],"friends":[{"id":0,"name":"Lana Crosby"},{"id":1,"name":"Jordan Guerrero"},{"id":2,"name":"Crane Shaw"}],"greeting":"Hello, Wells Burris! You have 4 unread messages.","favoriteFruit":"apple"},{"_id":"643f482f9b9a7deeeb2d3519","index":1,"guid":"83e1a219-e55d-482a-aab4-0ad35eb2e876","isActive":false,"balance":"$2,425.22","picture":"http://placehold.it/32x32","age":30,"eyeColor":"brown","name":"Lott Hebert","gender":"male","company":"MATRIXITY","email":"lotthebert@matrixity.com","phone":"+1 (841) 444-3099","address":"820 Rock Street, Bordelonville, Alabama, 1279","about":"Exercitation Lorem est nulla ut fugiat esse cupidatat do magna anim ad dolor. Duis ex pariatur ea incididunt adipisicing qui ea. Ut culpa do pariatur aute deserunt qui proident. Quis occaecat pariatur dolore excepteur adipisicing dolore id mollit ipsum amet. Et esse cillum reprehenderit eu proident mollit commodo tempor amet labore ipsum officia id. Reprehenderit in non nostrud veniam veniam tempor sit officia sit.\r\n","registered":"2020-01-14T07:55:11 -08:00","latitude":-84.090882,"longitude":71.36651,"tags":["nostrud","do","laboris","minim","pariatur","elit","sint"],"friends":[{"id":0,"name":"Maureen Wise"},{"id":1,"name":"Blackburn Montgomery"},{"id":2,"name":"Simmons Callahan"}],"greeting":"Hello, Lott Hebert! You have 2 unread messages.","favoriteFruit":"strawberry"},{"_id":"643f482f0e2d88826be9f788","index":2,"guid":"51d3469a-72bb-4f20-b5c6-332dbabcdcf1","isActive":false,"balance":"$2,201.62","picture":"http://placehold.it/32x32","age":40,"eyeColor":"brown","name":"Diane Fletcher","gender":"female","company":"DIGIGEN","email":"dianefletcher@digigen.com","phone":"+1 (900) 480-2542","address":"536 Furman Avenue, Cumminsville, Oregon, 2488","about":"Nostrud dolor labore aute duis cupidatat laborum magna amet est officia nostrud voluptate voluptate anim. Occaecat est ex qui aute aliqua occaecat et reprehenderit duis qui. Velit ullamco fugiat eu reprehenderit sunt culpa tempor elit laboris elit aliqua. Dolore cillum minim ipsum ad non ullamco esse eiusmod est ea. Voluptate magna do voluptate ex. Culpa veniam sint esse anim Lorem cillum laboris amet ea incididunt proident sint non.\r\n","registered":"2015-09-08T09:47:20 -08:00","latitude":50.725562,"longitude":-51.555565,"tags":["amet","ex","et","fugiat","proident","adipisicing","minim"],"friends":[{"id":0,"name":"Wiley Walsh"},{"id":1,"name":"Flossie Stephens"},{"id":2,"name":"Yvette Daugherty"}],"greeting":"Hello, Diane Fletcher! You have 9 unread messages.","favoriteFruit":"banana"},{"_id":"643f482f0ec421568cdb24c1","index":3,"guid":"d744ae07-392b-4878-b829-e7153513c0ba","isActive":false,"balance":"$2,821.94","picture":"http://placehold.it/32x32","age":27,"eyeColor":"green","name":"Wanda Duffy","gender":"female","company":"ACRODANCE","email":"wandaduffy@acrodance.com","phone":"+1 (868) 536-2987","address":"544 Beverly Road, Boling, Alaska, 2541","about":"Occaecat culpa Lorem enim nostrud consequat labore reprehenderit quis. Est tempor deserunt cillum elit anim ullamco qui excepteur officia mollit commodo. Cupidatat consequat cupidatat consectetur minim. Adipisicing nostrud exercitation sit eiusmod in tempor ipsum aute ut magna ipsum sit ad sit. Excepteur aliquip amet nulla laboris. Cupidatat nostrud deserunt irure qui amet est.\r\n","registered":"2014-06-09T08:11:17 -08:00","latitude":12.467258,"longitude":-171.725953,"tags":["aliqua","qui","dolor","minim","deserunt","culpa","esse"],"friends":[{"id":0,"name":"Lawson Blanchard"},{"id":1,"name":"Kerri Calderon"},{"id":2,"name":"Dunlap Cobb"}],"greeting":"Hello, Wanda Duffy! You have 1 unread messages.","favoriteFruit":"banana"},{"_id":"643f482f97574b8c723bc3bc","index":4,"guid":"65741edb-d393-4018-b9ec-681996b5274e","isActive":true,"balance":"$3,437.17","picture":"http://placehold.it/32x32","age":27,"eyeColor":"brown","name":"Chapman Wooten","gender":"male","company":"STRALOY","email":"chapmanwooten@straloy.com","phone":"+1 (913) 423-2530","address":"855 Pierrepont Street, Waterloo, District Of Columbia, 8535","about":"Deserunt duis ut aute in eu eu enim sit laboris sunt. Nisi sunt excepteur ut incididunt. Proident et id commodo sit reprehenderit cillum magna elit magna in id officia. Laborum dolore aliquip laborum proident magna ea officia Lorem esse dolor exercitation. Duis enim incididunt incididunt ea irure proident occaecat elit dolor ipsum anim. Nulla esse magna veniam exercitation do.\r\n","registered":"2016-11-30T11:09:46 -08:00","latitude":77.92023,"longitude":-32.159522,"tags":["eu","quis","aliqua","pariatur","sunt","est","ea"],"friends":[{"id":0,"name":"Obrien Barker"},{"id":1,"name":"Heidi Clements"},{"id":2,"name":"Neva Johnson"}],"greeting":"Hello, Chapman Wooten! You have 10 unread messages.","favoriteFruit":"apple"}]
)";


int main() {
    JsonParser parser;

    parser.Parse(TestJson1);

    std::cout << parser.Dump() << std::endl;

    auto root = parser.GetRoot();

    std::cout << root->IsObject() << std::endl;

    auto obj = std::dynamic_pointer_cast<JsonObject>(root);

    std::cout << "id: " << (*obj)["id"]->GetInteger() << std::endl;
    std::cout << "desc: " << (*obj)["desc"]->GetString() << std::endl;
}

